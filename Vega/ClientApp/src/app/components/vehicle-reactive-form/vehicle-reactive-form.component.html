<h1>New Vehicle</h1>
<form *ngIf="form" [formGroup]="form" (submit)="submit(form)">
  <div class="form-group">
    <label for="make">Make</label>
    <select id="make" class="form-control validation-error" (change)="onMakeChange()" name="makeId" formControlName="makeId">
      <option value="">Select make</option>
      <option *ngFor="let make of makes" [value]="make.id">{{make.name}}</option>
    </select>
    <app-validation-error *ngIf="hasError(controls['makeId'])" [errors]="controls.makeId.errors"></app-validation-error>
  </div>
  <div class="form-group">
    <label for="model">Model</label>
    <select id="model" class="form-control" name="modelId" formControlName="modelId">
      <option value="" disabled>Select make first</option>
      <option *ngFor="let model of models" [value]="model.id">{{model.name}}</option>
    </select>
    <app-validation-error *ngIf="hasError(controls['modelId'])" [errors]="controls.modelId.errors"></app-validation-error>
  </div>
  <hr>
  <h5>Is this vehicle registered?</h5>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="isRegistered" id="registered" value="true" formControlName="isRegistered"
      [checked]="form.get('isRegistered')">
    <label class="form-check-label" for="registered">Yes</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="isRegistered" id="notregistered" value="false" formControlName="isRegistered"
      [checked]="form.get('isRegistered')">
    <label class="form-check-label" for="notregistered">No</label>
  </div>
  <hr>
  <h5>Features</h5>
  <div class="form-group" >
    <div formArrayName="features">
      <div class="form-check form-check-inline" *ngFor="let feature of form.controls.features.controls; let i = index">
        <input class="form-check-input" [id]="'feature'+i" type="checkbox" name="features" [formControlName]="i">
        <label class="form-check-label" [for]="'feature'+i"> {{features[i].name}}</label>
      </div>
    </div>
    <app-validation-error *ngIf="hasError(controls['features'])" [errors]="controls.features.errors"></app-validation-error>
  </div>
  <hr>
  <h5>Contact</h5>
  <div class="form-group" formGroupName="contact">
    <div class="form-group">
      <label for="contactName">Name</label>
      <input id="contactName" type="text" class="form-control" name="contactName" formControlName="name">
      <app-validation-error *ngIf="hasError(controls['contact'].controls['name'])" [errors]="controls['contact'].controls['name'].errors"></app-validation-error>
    </div>
    <div class="form-group">
      <label for="contactPhone">Phone</label>
      <input id="contactPhone" type="text" class="form-control" name="contactPhone" formControlName="phone">
      <app-validation-error *ngIf="hasError(controls['contact'].controls['phone'])" [errors]="controls['contact'].controls['phone'].errors"></app-validation-error>
    </div>
    <div class="form-group">
      <label for="contectEmail">Email</label>
      <input id="contectEmail" type="text" class="form-control" name="contectEmail" formControlName="email">
      <app-validation-error *ngIf="hasError(controls['contact'].controls['email'])" [errors]="controls['contact'].controls['email'].errors"></app-validation-error>
    </div>
  </div>
  <button class="btn btn-primary">Save</button>
</form>
